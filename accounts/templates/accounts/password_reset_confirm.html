{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set New Password - EventCIT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>
<body>
    <div class="page-container">
        <div class="form-box">
            <div class="logo-section">
                <img src="{% static 'images/logo.png' %}" alt="QR Logo" class="qr-logo">
                <h1 class="brand-name">
                    <span class="brand-event">Event</span>
                    <span class="brand-cit">CIT</span>
                </h1>
                <p class="tagline">Reset your password to regain access to your account.</p>
            </div>

            {% if validlink %}
                <h2 style="color: #fff; margin-bottom: 15px;">Set a New Password</h2>

                <form method="post" class="login-form">
                    {% csrf_token %}

                    <div class="input-group">
                        <span class="input-icon"><i class="fas fa-lock"></i></span>
                        {{ form.new_password1 }}
                    </div>

                    <div class="input-group">
                        <span class="input-icon"><i class="fas fa-lock"></i></span>
                        {{ form.new_password2 }}
                    </div>

                    {% if form.errors %}
                        <div class="error-message">{{ form.errors }}</div>
                    {% endif %}

                    <button type="submit" class="btn-login">Update Password</button>
                </form>
            {% else %}
                <p class="error-message">This password reset link is invalid or has expired.</p>
                <div class="register-link">
                    <p>Back to <a href="{% url 'accounts:password_reset' %}" class="register-here-link">Request New Link</a></p>
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        // Add placeholders to password fields (Django’s default form doesn’t include them)
        document.addEventListener('DOMContentLoaded', function () {
            const passwordFields = document.querySelectorAll('input[type="password"]');
            if (passwordFields.length >= 2) {
                passwordFields[0].setAttribute('placeholder', 'Enter new password');
                passwordFields[1].setAttribute('placeholder', 'Confirm new password');
            }
        });
    </script>
</body>
</html>
