{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Tickets</title>
    <link rel="stylesheet" href="{% static 'css/ticket_owned_styles.css' %}">
</head>
<body>
    <div class="header">
        <h1>ğŸŸï¸ My Tickets</h1>
        <a href="{% url 'accounts:home' %}" class="back-btn">â¬… Back to Home</a>
    </div>

    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    {% if tickets %}
        <div class="ticket-grid">
            {% for ticket in tickets %}
                <div class="ticket-card {% if ticket.event.is_deleted %}deleted{% endif %}">

                    <h3>
                        {{ ticket.event.event_name }}
                        {% if ticket.event.is_edited %}
                            <span class="edit-badge">âœï¸ Edited</span>
                        {% endif %}
                    </h3>

                    {% if ticket.event.is_deleted %}
                        <p class="deleted-text">This event has been deleted by the organizer.</p>
                    {% endif %}

                    <p><strong>Venue:</strong> {{ ticket.event.event_venue }}</p>
                    <p><strong>Date:</strong> {{ ticket.event.event_date }}</p>
                    <p><strong>Time:</strong> {{ ticket.event.event_time_in }} - {{ ticket.event.event_time_out }}</p>
                    <p><strong>Price:</strong> â‚±{{ ticket.event.ticket_price }}</p>

                    <form method="post" action="{% url 'accounts:delete_ticket' ticket.id %}">
                    {% csrf_token %}
                    <button type="submit" class="delete-btn">Delete & Refund</button>
                    </form>

                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="no-tickets">You donâ€™t own any tickets yet.</p>
    {% endif %}
</body>
</html>
